{% extends "warehouse/base.html" %}
{% load staticfiles tethys_gizmos tags %}


{% block styles %}
  {{ block.super }}
  <link href="{% static 'tethys_apps/css/app_library.css' %}" rel="stylesheet" />
{% endblock %}

{% block header_buttons %}
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Help">
    <a data-toggle="modal" data-target="#help-modal"><span class="glyphicon glyphicon-question-sign"></span></a>
  </div>
{% endblock %}

{% block app_content %}
  <div class="app-library-wrapper clearfix">
    {% if resources %}
      <div id="app-list" class="isotopeContainer">
        {% for resource in resources %}
          <a class="app-container isotopeSelector" href="{% url 'warehouse:install' %}?id={{ resource.id }}">
            <div class="app-icon">
              <img {% if resource.metadata.icon %}src="{% static resource.metadata.icon %}"{% else %}src="{% static 'tethys_apps/images/default_app_icon.gif' %}"{% endif %} />
            </div>
            <div class="app-title" data-app-theme-color="{{ resource.color }}">
              <span>{{ resource.title }}</span>
            </div>
            <div class="color-effect" data-app-theme-color="{{ resource.color }}"></div>
            <div class="app-help-icon">
                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
            </div>
            <div class="app-help-info hidden">
                <p>{% if resource.description %}{{ resource.description }}{% else %}{% endif %}</p>
            </div>
            <div class="app-help-close hidden">X</div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <h2 class="no-apps-loaded-message">There are no apps available on the application store</h2>
    {% endif %}
  </div>
{% endblock %}

{# Use the after_app_content block for modals #}
{% block after_app_content %}
 
{% endblock %}

{% block app_actions %}
 
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'tethys_apps/vendor/imagesloaded.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'tethys_apps/vendor/masonry.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'tethys_apps/js/app_library.js' %}" type="text/javascript"></script>
  <script src="{% static 'tethys_apps/js/isotope.pkgd.min.js' %}" type="text/javascript"></script>
{% endblock %}